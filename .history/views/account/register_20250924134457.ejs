<%- include('../partials/head', {title: title}) %>

<main>
  <h1><%= title %></h1>

  <!-- Flash message (if any) -->
  <% if (messages && messages.length > 0) { %>
    <div class="flash-message">
      <% messages.forEach(function(message){ %>
        <p><%= message %></p>
      <% }) %>
    </div>
  <% } %>

  <form action="/account/register" method="post" class="account-form">
    <label for="first_name">First Name</label>
    <input type="text" id="first_name" name="first_name" value="<%= typeof locals.first_name !== 'undefined' ? locals.first_name : '' %>" required>

    <label for="last_name">Last Name</label>
    <input type="text" id="last_name" name="last_name" value="<%= typeof locals.last_name !== 'undefined' ? locals.last_name : '' %>" required>

    <label for="email">Email Address</label>
    <input type="email" id="email" name="email" value="<%= typeof locals.email !== 'undefined' ? locals.email : '' %>" required>

    <label for="password">Password</label>
    <input type="password" id="password" name="password" required
      minlength="12"
      pattern="^(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9]).{12,}$"
      title="Must be at least 12 characters, include 1 uppercase letter, 1 number, and 1 special character">

    <!-- Toggle password visibility -->
    <button type="button" onclick="togglePassword()">Show/Hide Password</button>

    <button type="submit">Register</button>
  </form>
</main>

<script>
function togglePassword() {
  const pwdField = document.getElementById("password");
  pwdField.type = pwdField.type === "password" ? "text" : "password";
}
</script>

<%- include('../partials/footer') %>
